-@page_title = "#{@user.name}'s Profile"
%p
  %b Type:
  = @user.user_type
%p
  %b Name:
  = @user.name
%p
  %b Email:
  = @user.email
%p
  %b Phone:
  = @user.phone
%p
  %b Initials:
  = @user.initials

%p
  %b Groups user is in:
  %br
  - @groups.each do |group|
    - if @current_user.isAdmin?
      = link_to "#{group.name}", group
      = " ["
      = link_to "remove", :controller => "users", :action => "removeGroup", :user_id => @user.id, :group_id => group.id
      = "]"
    - else
      = link_to "#{group.name}", "/groups/#{group.id}"
    %br

- if not @current_period.nil?
  %h3 My Work Calendars
  %table
    %tr
      %th Name
      %th Description
      %th Last Modified
    - @wcalendars.each do |c|
      %tr
        - if c.period_id == @current_period.id
          %td %b= link_to c.name, calendar_path(c)
        -else
          %td= link_to c.name, calendar_path(c)
        %td= c.description
        %td= c.updated_at.strftime('%a, %m/%d')

  %h3 My Availability Calendars
  %table
    %tr
      %th Name
      %th Description
      %th Start
      %th End
      %th Last Modified
    - @acalendars.each do |c|
      %tr
        - if c.period_id == @current_period.id
          %td 
            %b= link_to c.name, calendar_path(c)
        -else
          %td= link_to c.name, calendar_path(c)
        %td= c.description
        %td= c.period.start_date.strftime('%a, %m/%d')
        %td= c.period.end_date.strftime('%a, %m/%d')
        %td= c.updated_at.strftime('%a, %m/%d')
  
  %p
    %h3 Preferences
    - @preferences.each do |p|
      - if p.period_id == @current_period.id
        %b= link_to Period.find(p.period_id).name, preference_path(p)
      -else
        = link_to Period.find(p.period_id).name, preference_path(p)
      %br

- if @current_user.isAdmin?
  = link_to 'Edit', edit_user_path(@user)
  \|
  = link_to "Add to group", "/admin/users/#{@user.id}/add"
  \|
  = link_to "Delete user", @user, :confirm => 'Are you sure?', :method => :delete

