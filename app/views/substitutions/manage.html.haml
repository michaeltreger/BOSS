- @page_title = 'Manage Substitutions'
- if params[:entries]
  = render "newsubform"
- else
  .col-2
    %h3 Post a Substitution
    = form_tag :controller => "substitutions", :action => "get_entries_for_sub" do  
      %h4 View Entries From...
      %table
        %tr
          %tr
            %th Select
            %th Name
            %th Owner
          - @admin_allCalendars.each do |c|
            %tr
              %td= check_box_tag "calendars[#{c.id.to_s}]"
              %td= c.name
              %td= c.user.initials
      <br>
      = submit_tag 'View'
  .col-2
    %h3 Assign Substitutions
    = form_tag :controller => "substitutions", :action => "take_or_assign_subs" do  
      %h4 Available Substitutions
      %table#all_subs
        %tr
          %th Select
          %th Day
          %th Time
          %th Location
          %th Posted By
          %th Reserved For
          %th Notes
        - @substitutions.each do |substitution|
          %tr
            %td= check_box_tag "entries[#{substitution.id.to_s}]"
            %td= substitution.entry.start_time.strftime('%a, %m/%d')
            %td= substitution.entry.start_time.strftime('%I:%M%p') + ' -  ' + substitution.entry.end_time.strftime('%I:%M%p')
            %td= 'Lab ' + substitution.entry.lab_id.to_s
            - if substitution.users.size > 0
              %td= substitution.users[0].initials
            - else
              %td
            - if substitution.users.size > 1
              %td= substitution.users[1].initials
            - else
              %td
            %td= substitution.description
      <br>
      %h4 Assign Selected Substitutions To:
      = collection_select(:calendar, :id, @admin_allCalendars, :id, :full_name, {}, {:class => :calendarselect})
      <br><br>
      = submit_tag 'Assign Selected Substitutions', {:name => 'submit_type[assign]', :value => 'Make Assignments'}
      <br><br>
      = submit_tag 'Delete Selected Substitutions', {:confirm => 'Are you sure you want to delete these substitutions?', :name => 'submit_type[delete]', :value => 'Delete Selected'}
